$(function(){$(".adv-form-header").submit(function(t){var a;-1!=location.href.indexOf("/search")&&(t.preventDefault(),a=$(":input",this).filter(function(t,a){return""!=$(a).val()}).serialize(),$.ajax({url:$(this).attr("action"),type:"GET",data:a,dataType:"JSON",success:function(t){0<t.html.length&&($(".wrap-content").html(t.html),t=location.origin+location.pathname+"?"+a,history.pushState({},null,t))}}))}),$(document).on("click",".filter-sort-pick li",function(){var t=$(this).attr("data-val");$(".adv-form-header input[name=sort]").val(t),$(this).closest(".popover").popover("hide"),$(".adv-form-header").submit()}),$(document).on("click",".remove-filter",function(){if("multiple"==$(this).parent().attr("data-type")){var a=$(this).parent().attr("data-value"),t=$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').parent().find("div[data-chars]"),e=[];if(0<$($('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').parent().popover().data("bs.popover").tip).length){if($('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val()==a)$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val(null);else{let t=$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val().split(",");delete t[t.indexOf(a)];var r=this;t.forEach(function(t){e.push($($('.adv-form-header input[name="'+$(r).parent().attr("data-field")+'"]').parent().popover().data("bs.popover").tip).find('[data-val="'+t+'"]').text().trim())}),t=t.filter(Boolean).join(","),$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val(t),$($('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').parent().popover().data("bs.popover").tip).find('[data-val="'+a+'"] input[type=checkbox]').prop("checked",!1)}t.text(0<e.length?e.join(",").substr(0,t.attr("data-chars")):t.attr("data-default-text"))}else $('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').parent().find('[data-val="'+a+'"]').click()}else 0<$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').length&&$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val(null);$(this).parent().fadeOut(200),$(".adv-form-header").submit()})});