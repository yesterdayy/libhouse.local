$(function(){$(".adv-form-header").submit(function(b){if(location.href.indexOf("/search")!=-1){b.preventDefault();var a=this;$.ajax({url:$(this).attr("action"),type:"GET",data:$(this).serialize(),dataType:"JSON",success:function(c){if(c.html.length>0){$(".wrap-content").html(c.html);let new_url=location.origin+location.pathname+"?"+$(a).serialize();history.pushState({},null,new_url)}}})}else{}});$(document).on("click",".filter-sort-pick li",function(){let value=$(this).attr("data-val");$(".adv-form-header input[name=sort]").val(value);$(this).closest(".popover").popover("hide");$(".adv-form-header").submit()});$(document).on("click",".remove-filter",function(){if($(this).parent().attr("data-type")=="multiple"){var d=$(this).parent().attr("data-value");var a=$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').parent().find("div[data-chars]");var c=[];if($($('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').parent().popover().data("bs.popover").tip).length>0){if($('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val()==d){$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val(null)}else{let old_value=$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val().split(",");delete (old_value[old_value.indexOf(d)]);var b=this;old_value.forEach(function(e){c.push($($('.adv-form-header input[name="'+$(b).parent().attr("data-field")+'"]').parent().popover().data("bs.popover").tip).find('[data-val="'+e+'"]').text().trim())});old_value=old_value.filter(Boolean).join(",");$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val(old_value);$($('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').parent().popover().data("bs.popover").tip).find('[data-val="'+d+'"] input[type=checkbox]').prop("checked",false)}a.text(c.length>0?c.join(",").substr(0,a.attr("data-chars")):a.attr("data-default-text"))}else{$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').parent().find('[data-val="'+d+'"]').click()}}else{if($('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').length>0){$('.adv-form-header input[name="'+$(this).parent().attr("data-field")+'"]').val(null)}}$(this).parent().fadeOut(200);$(".adv-form-header").submit()})});